<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Exportar CSV</title>
    <style>
        body { font-family: "Segoe UI", Arial, sans-serif; margin: 0; background: #f4f6f9; color: #1f2933; }
        .layout { max-width: 720px; margin: 0 auto; padding: 32px 24px; display: flex; flex-direction: column; gap: 24px; }
        h1 { font-size: 28px; margin: 0; }
        .card { background: #fff; border: 1px solid #d9dee7; border-radius: 12px; padding: 24px; box-shadow: 0 6px 12px rgba(15, 23, 42, 0.08); }
        .card h2 { margin: 0 0 16px; font-size: 20px; color: #0f172a; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 16px; align-items: end; }
        label { font-size: 12px; letter-spacing: .04em; color: #6b7280; text-transform: uppercase; margin-bottom: 4px; display: block; }
        input[type="date"] { width: 100%; padding: 10px; border: 1px solid #cbd5f0; border-radius: 8px; font-size: 14px; }
        button { appearance: none; border: none; border-radius: 8px; padding: 10px 18px; font-size: 14px; font-weight: 600; cursor: pointer; background: #2563eb; color: #fff; }
        button:hover { background: #1d4ed8; }
        .actions { display: flex; gap: 12px; flex-wrap: wrap; }
        .back-link { text-decoration: none; color: #2563eb; font-weight: 600; }
        .errors { background: #fee2e2; border: 1px solid #fca5a5; color: #991b1b; border-radius: 8px; padding: 12px 16px; margin: 0; list-style: none; }
        .errors li + li { margin-top: 6px; }
        @media (max-width: 540px) {
            .layout { padding: 24px 16px; }
            .actions { flex-direction: column; }
            button { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="layout">
        <header>
            <a class="back-link" href="{% url 'dashboard' %}">&larr; Volver al panel</a>
            <h1>Exportar CSV</h1>
            <p>Descarga órdenes o pagos filtrando por rango de fechas (inclusive).</p>
        </header>

        {% if errors %}
            <ul class="errors">
                {% for error in errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        <section class="card">
            <h2>Rango de fechas</h2>
            <form method="get">
                <div class="grid">
                    <div>
                        <label for="start-date">Desde</label>
                        <input id="start-date" type="date" name="start" value="{{ start }}">
                    </div>
                    <div>
                        <label for="end-date">Hasta</label>
                        <input id="end-date" type="date" name="end" value="{{ end }}">
                    </div>
                </div>
                <div class="actions">
                    <button type="submit" formaction="{{ orders_url }}">Descargar órdenes</button>
                    <button type="submit" formaction="{{ payments_url }}">Descargar pagos</button>
                </div>
            </form>
        </section>
    </div>
</body>
</html>

